import React from "react";

export default function Home({ headers }) {
  const headerRows = [];
  for (const header in headers) {
    headerRows.push(
      <tr key={header}>
        <td>
          <samp className="whitespace-nowrap">{header}</samp>
        </td>
        <td>
          <samp>{headers[header]}</samp>
        </td>
      </tr>
    );
  }

  return (
    <div className="px-4 py-10 max-w-3xl mx-auto sm:px-6 sm:py-12 lg:max-w-4xl lg:py-16 lg:px-8 xl:max-w-6xl">
      <article className="prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto">
        <h1>cloudflare.coffee</h1>
        <h2>What is this?</h2>
        <p>
          The body of the HTTP response youâ€™re viewing is HTML is generated by a
          Next.js server running on Heroku. The table below lists all the HTTP
          headers that were included in your request.
        </p>
        <table>
          <thead>
            <tr>
              <th>Header</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>{headerRows}</tbody>
        </table>
      </article>
    </div>
  );
}

export async function getServerSideProps(context) {
  return {
    props: {
      headers: { ...context.req.headers },
    },
  };
}
